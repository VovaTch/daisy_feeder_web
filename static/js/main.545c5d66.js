(()=>{"use strict";var e={38139:(e,t,n)=>{n.r(t),n.d(t,{default:()=>wt});n(22807);var r=n(95004),o=n(81779),a=n(70885),i=n(2629),l=(0,r.createContext)(),s=function(e){var t=e.children,o=n(14009),s=n(58768),d=n(43151),u=(0,r.useState)(),c=(0,a.default)(u,2),f=c[0],g=c[1],y=(0,r.useState)(),h=(0,a.default)(y,2),p=h[0],m=h[1],x=(0,r.useState)(),b=(0,a.default)(x,2),j=b[0],v=b[1],S=(0,r.useState)([]),w=(0,a.default)(S,2),C=w[0],k=w[1],O=(0,r.useState)([]),I=(0,a.default)(O,2),T=I[0],P=I[1],$=(0,r.useState)("https://vovatch.pythonanywhere.com/"),D=(0,a.default)($,2),F=D[0],R=D[1],U=(0,r.useState)([]),L=(0,a.default)(U,2),B=L[0],A=L[1],z=(0,r.useState)(!0),E=(0,a.default)(z,2),q={domain:F,feedItems:B,isLoading:E[0],token:f,errorMsg:p,activeUser:j,minUsers:C,friendRequests:T,landingBackgroundImage:o,screenBackgroundImage:s,drawerBackgroundImage:d,setFeedItems:A,setIsLoading:E[1],setToken:g,setDomain:R,setActiveUser:v,setErrorMsg:m,setMinUsers:k,setFriendRequests:P};return(0,i.jsx)(l.Provider,{value:q,children:t})},d=n(4942),u=n(15861),c=n(96909),f=n(67842),g=n(68922),y=n(33387),h=n(66357),p=n(48334),m=n(8825),x=n(59550),b=x.default.create({drawerHeader:{flexDirection:"row",alignItems:"center",padding:16},drawerHeaderText:{fontSize:24,color:"white",fontWeight:"bold"},drawerContentContainer:{flex:1,paddingTop:16},logo:{width:120,height:120,borderRadius:60,marginRight:12,marginLeft:12},imageHex:{},iconFocused:{color:"white",fontSize:24},iconNotFocused:{color:"white",fontSize:24},itemFocused:{backgroundColor:"#1b1b1b",color:"white",fontSize:24},itemNotFocused:{color:"white",fontSize:24}}),j=x.default.create({backgroundImage:{flex:1,resizeMode:"cover",justifyContent:"center"}});function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(){return(0,i.jsxs)(f.default,{style:b.drawerHeader,children:[(0,i.jsx)(g.default,{source:n(73486),style:b.logo}),(0,i.jsxs)(y.default,{style:b.drawerHeaderText,children:["Daisy","\n","Feeder"]})]})},C=function(e){var t=(0,r.useContext)(l).drawerBackgroundImage;return(0,i.jsx)(f.default,{style:b.drawerContentContainer,children:(0,i.jsx)(h.default,{source:t,style:j.backgroundImage,children:(0,i.jsxs)(p.default,S(S({},e),{},{children:[(0,i.jsx)(w,{}),(0,i.jsx)(m.default,S({},e))]}))})})},k=n(73988),O=n(59703),I=n(45473),T=n(16367),P=n(8970),$=n(12062),D=n(45208),F=n(91667),R=n(42982);function U(e,t){return e.filter((function(e){return new Date(e.datetime).toISOString().split("T")[0]===t}))}function L(e,t){var n=e.find((function(e){return e.id===t}));return n?n.username:""}function B(e,t){var n=[t.id].concat((0,R.default)(t.profile.friends));return e.filter((function(e){return n.includes(e.feeder)}))}var A=function(){var e=(0,u.default)((function*(e,t,n,r){try{console.log(`Attempting to delete item ${e}...`),yield F.default.delete(r+"api/feeditem/"+String(e)+"/"),n(t.filter((function(t){return t.id!==e}))),console.log(`Removed item id ${e}`)}catch(o){console.log(`Error in deleting item id ${e}: ${o}`)}}));return function(t,n,r,o){return e.apply(this,arguments)}}(),z=function(){var e=(0,u.default)((function*(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"http://192.168.1.79:8000/";try{console.log("Attempting to clear history...");for(var o=(new Date).toISOString().split("T")[0],a=(n=o,e.filter((function(e){return new Date(e.datetime).toISOString().split("T")[0]!==n}))),i=0;i<a.length;i++)A(a[i].id,e,t,r);console.log("Cleared feeding history up to today.")}catch(l){console.log(`Failed to clear history: ${l}`)}}));return function(t,n){return e.apply(this,arguments)}}(),E=x.default.create({table:{flex:1,marginTop:15,marginBottom:100,marginLeft:10,marginRight:10,width:350,borderColor:"#eee",borderWidth:0,borderRadius:10,backgroundColor:"rgba(255, 255, 255, 0.5)"},innerText:{textAlign:"center",fontSize:16},amount_wet:{fontSize:40,color:"blue",fontWeight:"bold"},amount_dry:{fontSize:40,color:"red",fontWeight:"bold"},leftColumn:{color:"red",padding:10,alignItems:"flex-start"},rightColumn:{padding:10,alignItems:"center"},settingsTitle:{fontSize:18,fontWeight:"bold",marginBottom:10}}),q=x.default.create({highLevelContainers:{flex:1,alignItems:"center",justifyContent:"center",width:"100%"},inputContainer:{width:"100%",borderRadius:8,flexDirection:"row",alignItems:"center",borderWidth:0},formContainer:{width:"80%"},tableContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:10,paddingVertical:5,borderColor:"#ccc",borderWidth:0,borderRadius:10,marginTop:5,margin:5,backgroundColor:"rgba(255, 255, 255, 0.75)"},settingsContainer:{justifyContent:"space-between",paddingHorizontal:10,paddingVertical:10,borderColor:"#ccc",borderWidth:0,borderRadius:10,marginTop:5,margin:5,backgroundColor:"rgba(255, 255, 255, 0.5)"},rowButtonContainer:{flexDirection:"row",justifyContent:"space-around"}}),_=function(e){var t=e.foodItems,n=e.setFoodItems,o=e.minUsers,a=e.requiredDate,s=(0,r.useContext)(l).domain,d=t.filter((function(e){return new Date(e.datetime).toISOString().split("T")[0]===a}));return(0,i.jsx)(D.default,{children:d.map((function(e,r){return(0,i.jsxs)(f.default,{style:q.tableContainer,children:[(0,i.jsxs)(f.default,{style:E.leftColumn,children:[(0,i.jsx)(y.default,{style:E.innerText,children:new Date(e.datetime).toLocaleTimeString()},`time-${r}`),(0,i.jsx)(y.default,{style:E.innerText,children:L(o,e.feeder)},`feeder-${r}`),(0,i.jsx)(y.default,{style:E.innerText,children:e.food_choice},`type-${r}`)]},`left-side-${r}`),(0,i.jsx)(f.default,{style:E.rightColumn,children:(0,i.jsx)(y.default,{style:"wet"===e.food_choice?E.amount_wet:E.amount_dry,children:e.amount},`amount-${r}`)},`middle-${r}`),(0,i.jsx)(f.default,{style:E.rightColumn,children:(0,i.jsx)($.default,{style:{alignContent:"center",padding:10},onPress:function(){A(e.id,t,n,s)},children:(0,i.jsx)(k.default,{name:"trash",color:"black",size:30})},`delete-${r}`)},`right-${r}`)]},`box-container-${r}`)}))})},W=n(93604),M=n(8299),H=n(96106),V=n(30428),N=n(64994),K=function(){var e=(0,u.default)((function*(e,t){try{console.log("Trying to send data..."),console.log(`Food type: ${e.food_choice}`),yield F.default.post(t+"api/feeditem/",e),console.log("Sent feeding data.")}catch(n){return console.error(n),n}}));return function(t,n){return e.apply(this,arguments)}}(),Z=x.default.create({modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalContent:{width:300,backgroundColor:"white",padding:20,borderRadius:10,elevation:5},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:10},modalText:{marginBottom:20},modalContainerInner:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalContentInner:{backgroundColor:"white",padding:20,borderRadius:10,alignItems:"center"}}),G=x.default.create({textInput:{width:"100%",borderRadius:8,flexDirection:"row",alignItems:"center",borderWidth:0},eyeIcon:{position:"absolute",right:14,top:8,borderLeftWidth:1,paddingLeft:10,borderColor:"#cecece"},label:{color:"white",marginTop:10},textInputLarge:{height:40,borderColor:"gray",borderWidth:1,borderRadius:5,marginBottom:15,paddingLeft:10,color:"black",backgroundColor:"white",width:"100%"},loginErrorText:{color:"#8d0000",marginBottom:10,fontSize:16,fontWeight:"bold",textAlign:"center"}}),J=x.default.create({standardButton:{backgroundColor:"#884400",padding:12,margin:5,borderRadius:5,alignItems:"center",verticalAlign:"center",flexDirection:"row",justifyContent:"space-evenly"},buttonText:{color:"white",fontWeight:"bold",fontSize:18},okButton:{backgroundColor:"green",padding:10,borderRadius:5,flex:1,marginRight:5,alignItems:"center"},cancelButton:{backgroundColor:"red",padding:10,borderRadius:5,flex:1,marginLeft:5,alignItems:"center"},backButton:{backgroundColor:"transparent",padding:15,borderRadius:5,alignItems:"center",borderWidth:1,borderColor:"white",margin:5},floatingAddButton:{backgroundColor:"#682100",borderRadius:30,width:60,height:60,position:"absolute",bottom:20,right:20,justifyContent:"center",alignItems:"center",elevation:3},addButtonText:{color:"#fff",fontSize:40,fontWeight:"bold"},timeButton:{backgroundColor:"white",borderColor:"#dddddd",borderRadius:10,borderWidth:1,margin:5,marginBottom:25,paddingTop:30,paddingBottom:30,padding:10},buttonRowContainer:{flexDirection:"row",justifyContent:"center",alignItems:"center",paddingVertical:10,paddingHorizontal:15,borderRadius:5,left:-15},buttonIcon:{marginRight:10,fontSize:24,color:"white"}}),Q=function(e){var t=e.isVisible,n=e.onClose,o=e.onSubmit,s=(0,r.useContext)(l),d=s.domain,u=s.activeUser,c=(0,r.useState)(""),g=(0,a.default)(c,2),h=g[0],p=g[1],m=(0,r.useState)("dry"),x=(0,a.default)(m,2),b=x[0],j=x[1],v=(0,r.useState)(new Date),S=(0,a.default)(v,2),w=S[0],C=S[1],O=(0,r.useState)(!1),I=(0,a.default)(O,2),T=I[0],P=I[1];return(0,i.jsx)(W.default,{transparent:!0,visible:t,onRequestClose:n,children:(0,i.jsx)(f.default,{style:Z.modalContainer,children:(0,i.jsxs)(f.default,{style:Z.modalContent,children:[(0,i.jsx)(y.default,{children:"Food amount:"}),(0,i.jsx)(M.default,{placeholder:"Enter amount",keyboardType:"numeric",style:G.textInputLarge,value:h,onChangeText:function(e){return p(e)}}),(0,i.jsx)(y.default,{children:"Food Type:"}),(0,i.jsx)(f.default,{children:(0,i.jsxs)(V.Picker,{selectedValue:b,onValueChange:function(e){return j(e)},children:[(0,i.jsx)(V.Picker.Item,{label:"Dry",value:"dry"}),(0,i.jsx)(V.Picker.Item,{label:"Wet",value:"wet"})]})}),(0,i.jsx)(y.default,{children:"Feeding Time:"}),(0,i.jsx)($.default,{style:J.timeButton,onPress:function(){return P(!0)},children:(0,i.jsx)(y.default,{children:`Pick ${w.toLocaleTimeString()}`})}),T&&(0,i.jsx)(N.default,{style:J.timeButton,value:w,mode:"time",is24Hour:!0,display:"default",onChange:function(e,t){P("ios"===H.default.OS),t&&C(t)}}),(0,i.jsx)($.default,{style:J.standardButton,onPress:function(){o(),function(){var e={feeder:u.id,amount:parseInt(h),datetime:w.toISOString(),food_choice:b};K(e,d),p(""),j("dry"),C(new Date)}()},children:(0,i.jsxs)(f.default,{style:J.buttonRowContainer,children:[(0,i.jsx)(k.default,{name:"checkmark",style:J.buttonIcon}),(0,i.jsx)(y.default,{style:J.buttonText,children:"Submit"})]})}),(0,i.jsx)($.default,{style:J.standardButton,onPress:n,children:(0,i.jsxs)(f.default,{style:J.buttonRowContainer,children:[(0,i.jsx)(k.default,{name:"close",style:J.buttonIcon}),(0,i.jsx)(y.default,{style:J.buttonText,children:"Cancel"})]})})]})})})},X=x.default.create({floatingView:{position:"absolute",bottom:"5%",left:"10%",right:"15%",borderColor:"#ccc"},auxText:{fontSize:18},wetText:{fontSize:30,color:"blue",fontWeight:"bold"},dryText:{fontSize:30,color:"red",fontWeight:"bold"}}),Y=function(e){var t=e.data;return(0,i.jsx)(f.default,{style:X.floatingView,children:(0,i.jsxs)(y.default,{style:X.auxText,children:["Total wet: ",(0,i.jsx)(ee,{data:t})," dry: ",(0,i.jsx)(te,{data:t})]})})},ee=function(e){var t=e.data;return(0,i.jsx)(y.default,{style:X.wetText,children:ne(t,"wet")})},te=function(e){var t=e.data;return(0,i.jsx)(y.default,{style:X.dryText,children:ne(t,"dry")})};function ne(e,t){for(var n=e.filter((function(e){return e.food_choice===t})),r=0,o=0;o<n.length;o++)r+=n[o].amount;return r}var re=function(e){var t=e.onPress;return(0,i.jsx)($.default,{style:J.floatingAddButton,onPress:t,children:(0,i.jsx)(y.default,{style:J.addButtonText,children:"+"})})},oe=function(){var e=(0,u.default)((function*(e,t,n){try{console.log("Fetching feeding items...");var r=yield F.default.get(`${n}api/feeditem/`);e(r.data),t(!1),console.log(`Successfully fetched ${r.data.length} data-points.`)}catch(o){console.log(`Failed to fetch data, ${o}`)}}));return function(t,n,r){return e.apply(this,arguments)}}(),ae=(function(){var e=(0,u.default)((function*(e,t){try{var n=yield F.default.get(t+`api/minimal-user/${e}/`);return console.log("User fetched successfully:",n.data),n.data}catch(r){return console.error("Error fetching user:",r),r}}))}(),function(){var e=(0,u.default)((function*(e,t,n){try{var r=yield F.default.get(n+"api/minimal-user/");e(r.data),t(!1),console.log(`All minimum ${r.data.length} user representation were fetched successfully`)}catch(o){console.log("Error fetching min user list:",o)}}));return function(t,n,r){return e.apply(this,arguments)}}()),ie=n(25768),le=n(18859),se=function(){var e=(0,u.default)((function*(e){try{var t=yield ie.getItemAsync(e);if(null!==t)return console.log(`Retrieved key: ${e}`),t;console.log("Key not found in SecureStorage")}catch(n){console.log("Error retrieving key (mobile):",n)}}));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=(0,u.default)((function*(e){try{var t=yield le.default.getItem(e);if(null!==t)return console.log(`Retrieved key: ${e}`),t;console.log("Key not found in SecureStorage")}catch(n){console.log("Error retrieving key (web):",n)}}));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=(0,u.default)((function*(e,t){try{yield ie.setItemAsync(e,t),console.log(`Stored key: ${e}`)}catch(n){return console.log("Error storing key (mobile):",n),n}}));return function(t,n){return e.apply(this,arguments)}}(),ce=function(){var e=(0,u.default)((function*(e,t){try{yield le.default.setItem(e,t),console.log(`Stored key: ${e}`)}catch(n){return console.log("Error storing key (web):",n),n}}));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=(0,u.default)((function*(e){try{yield ie.deleteItemAsync(e),console.log(`Data from key ${e} removed successfully`)}catch(t){return console.log("Error removing from key (mobile):",t),t}}));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=(0,u.default)((function*(e){try{yield le.default.removeItem(e),console.log(`Data from key ${e} removed successfully`)}catch(t){return console.log("Error removing from key (web):",t),t}}));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=(0,u.default)((function*(e){try{return"web"===H.default.OS?yield de(e):yield se(e)}catch(t){console.log("Error retrieving key:",t)}}));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=(0,u.default)((function*(e,t){try{"web"===H.default.OS?yield ce(e,t):yield ue(e,t)}catch(n){console.log("Error storing key:",n)}}));return function(t,n){return e.apply(this,arguments)}}(),pe=function(){var e=(0,u.default)((function*(e){try{"web"===H.default.OS?yield ge(e):yield fe(e)}catch(t){console.log("Error removing from key:",t)}}));return function(t){return e.apply(this,arguments)}}();function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be=function(){var e=(0,u.default)((function*(e,t,n,r){try{console.log("Updating friends list...");var o=e.profile.friends,a=n.filter((function(e){return!e.pending})).flatMap((function(t){return t.to_user!==e.id||o.includes(t.from_user)?t.from_user!==e.id||o.includes(t.to_user)?[]:[t.to_user]:[t.from_user]}));console.log(`potentialFriends: ${a}`);var i=Array.from(new Set([].concat((0,R.default)(a),(0,R.default)(o))));yield F.default.patch(r+`api/profile/${e.profile.id}/`,{friends:i}),t(xe(xe({},e),{},{profile:{id:e.profile.id,friends:i}})),console.log(`Updated the friend list of ${e.username} to include ${e.profile.friends.length} friends`)}catch(l){console.log(`Could not update friend list for ${e.username}: ${l}`)}}));return function(t,n,r,o){return e.apply(this,arguments)}}(),je=function(){var e=(0,u.default)((function*(e,t,n,r,o,a,i){try{console.log(`Updating friend request ID ${e} to status ${a?"approved":"denied"}...`);var l=yield ye("token");yield F.default.post(`${i}api/friend-request-response/${e}/`,{approved:a},{headers:{Authorization:`Token ${l}`}});var s=t.map((function(t){return t.id===e?xe(xe({},t),{},{approved:a,pending:!1}):t}));n(s);var d=s.find((function(t){return t.id===e}));o(xe(xe({},r),{},{profile:xe(xe({},r.profile),{},{friends:a?[].concat((0,R.default)(r.profile.friends),[d.from_user]):r.profile.friends})})),console.log(`Updated friend request ID ${e} to status ${a}, updated active user's ${r.username} friends list...`)}catch(u){console.log(`Failed to update friend request ID ${e}: ${u}`)}}));return function(t,n,r,o,a,i,l){return e.apply(this,arguments)}}(),ve=function(){var e=(0,u.default)((function*(e,t,n,r){try{console.log(`Attempting to remove friend request ID ${e}...`),F.default.delete(`${r}api/friend-requests/${e}/`),n(t.filter((function(t){return t.id!==e}))),console.log(`Removed friend request ID ${e}`)}catch(o){console.log(`Failed to remove friend request ID ${e}.`)}}));return function(t,n,r,o){return e.apply(this,arguments)}}(),Se=function(){var e=(0,u.default)((function*(e,t,n,r){try{console.log(`Attempting to remove all answered friend requests from user ID ${e.id}`);for(var o=t.filter((function(t){return!t.pending&&t.from_user===e.id})),a=o.length,i=0;i<a;i++)ve(o[i].id,t,n,r);console.log(`Removed all ${a} answered friend requests.`)}catch(l){console.log("Failed to remove answered friend requests.")}}));return function(t,n,r,o){return e.apply(this,arguments)}}(),we={backgroundColor:"#383838",barStyle:"light-content"};function Ce(){var e=(0,r.useContext)(l),t=e.domain,n=e.feedItems,o=e.setFeedItems,s=e.isLoading,d=e.setIsLoading,u=e.friendRequests,c=e.setFriendRequests,g=e.minUsers,y=e.setMinUsers,p=e.activeUser,m=e.setActiveUser,x=e.screenBackgroundImage,b=(0,r.useState)(!1),v=(0,a.default)(b,2),S=v[0],w=v[1],C=(new Date).toISOString().split("T")[0];return(0,r.useEffect)((function(){oe(o,d,t),ae(y,d,t),be(p,m,u,t),Se(p,u,c,t)}),[S]),(0,i.jsx)(h.default,{source:x,style:j.backgroundImage,children:(0,i.jsxs)(T.default,{style:q.highLevelContainers,children:[(0,i.jsx)(P.default,{backgroundColor:we.backgroundColor,barStyle:we.barStyle}),s?(0,i.jsx)(I.default,{size:"large",color:"#884400"}):(0,i.jsx)(f.default,{style:E.table,children:(0,i.jsx)(_,{foodItems:B(n,p),setFoodItems:o,minUsers:g,requiredDate:C})}),(0,i.jsx)(Q,{isVisible:S,onClose:function(){w(!1)},onSubmit:function(){w(!1)}}),(0,i.jsx)(re,{onPress:function(){w(!0)}}),(0,i.jsx)(Y,{data:U(B(n,p),C)}),(0,i.jsx)(P.default,{style:"auto"})]})})}var ke=n(80694),Oe=n(96190),Ie=x.default.create({dropdownMain:{margin:16,height:50,backgroundColor:"white",borderRadius:12,padding:12,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:1.41,elevation:2},icon:{marginRight:5},item:{padding:17,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},textItem:{flex:1,fontSize:16},placeholderStyle:{fontSize:14,color:"#aaa",alignSelf:"center"},selectedTextStyle:{fontSize:16},iconStyle:{marginLeft:40,width:20,height:20},inputSearchStyle:{height:40,fontSize:16}});const Te=function(e){var t=e.dateData,n=e.setDateSelected,o=(0,r.useState)(null),l=(0,a.default)(o,2),s=l[0],d=l[1],u=(0,r.useState)(!1),c=(0,a.default)(u,2),g=c[0],h=c[1];return(0,i.jsx)(ke.Dropdown,{style:Ie.dropdownMain,placeholderStyle:Ie.placeholderStyle,selectedTextStyle:Ie.selectedTextStyle,inputSearchStyle:Ie.inputSearchStyle,iconStyle:Ie.iconStyle,data:t,search:!0,maxHeight:300,labelField:"label",valueField:"value",placeholder:g?"...":"Select a date...",searchPlaceholder:"Search...",value:s,onFocus:function(){return h(!0)},onBlur:function(){return h(!1)},onChange:function(e){d(e.value),h(!1),n(e.value)},renderLeftIcon:function(){return(0,i.jsx)(Oe.default,{style:Ie.icon,color:g?"blue":"black",name:"Safety",size:20})},renderItem:function(e){return(0,i.jsxs)(f.default,{style:Ie.item,children:[(0,i.jsx)(y.default,{style:Ie.textItem,children:e.label}),e.value===s&&(0,i.jsx)(Oe.default,{style:Ie.icon,color:"black",name:"Safety",size:20})]})}})};function Pe(){var e=(0,r.useContext)(l),t=e.domain,n=e.feedItems,o=e.setFeedItems,s=e.isLoading,d=e.setIsLoading,u=e.minUsers,c=e.setMinUsers,g=e.activeUser,y=e.screenBackgroundImage,p=(0,r.useState)(""),m=(0,a.default)(p,2),x=m[0],b=m[1];return(0,r.useEffect)((function(){ae(c,d,t),oe(o,d,t)}),[]),(0,i.jsx)(h.default,{source:y,style:j.backgroundImage,children:(0,i.jsxs)(T.default,{style:q.highLevelContainers,children:[(0,i.jsx)(P.default,{backgroundColor:we.backgroundColor,barStyle:we.barStyle}),s?(0,i.jsx)(I.default,{size:"large",color:"#884400"}):(0,i.jsxs)(f.default,{children:[(0,i.jsx)(Te,{dateData:function(e){var t=function(e){return(0,R.default)(new Set(e))}(function(e){for(var t=[],n=0;n<e.length;n++)t=[].concat((0,R.default)(t),[new Date(e[n].datetime).toISOString().split("T")[0]]);return t}(e));return function(e){for(var t=[],n=0;n<e.length;n++)t=[].concat((0,R.default)(t),[{label:e[n],value:e[n]}]);return t}(t)}(B(n,g)),setDateSelected:b}),(0,i.jsx)(f.default,{style:E.table,children:(0,i.jsx)(_,{foodItems:B(n,g),setFoodItems:o,minUsers:u,requiredDate:x})}),(0,i.jsx)(Y,{data:U(B(n,g),x)})]})]})})}var $e=n(12308),De=n(82799),Fe=n(17813),Re=n(6151),Ue=x.default.create({container:{},plotCard:{backgroundColor:"rgba(255, 255, 255, 0.5)",borderColor:"#eee",borderWidth:0,borderRadius:10,margin:15},victoryAxisStyle:{axis:{stroke:"#756f6a"},ticks:{stroke:"grey",size:5},tickLabels:{fontSize:10,padding:5},axisLabel:{padding:30}},victoryTotalLine:{data:{stroke:"#0d6623",strokeWidth:5},parent:{border:"3px solid #ccc"}},victoryDryLine:{data:{stroke:"#660d0d",strokeWidth:5},parent:{border:"3px solid #ccc"}},victoryWetLine:{data:{stroke:"#031ca7",strokeWidth:5},parent:{border:"3px solid #ccc"}}}),Le=function(e){var t=e.data,n=e.foodType,r=void 0===n?"none":n;return(0,i.jsx)(f.default,{children:(0,i.jsxs)($e.default,{width:350,height:350,children:[(0,i.jsx)(De.default,{dependentAxis:!0,tickFormat:function(e){return`${e}`},style:Ue.victoryAxisStyle,label:"Amount (grams)"}),(0,i.jsx)(De.default,{tickLabelComponent:(0,i.jsx)(Fe.default,{angle:"90"}),tickFormat:function(e){return"   "+new Date(e).getDate()+"-"+String(Number(new Date(e).getMonth())+1)},style:Ue.victoryAxisStyle,label:"Date"}),(0,i.jsx)(Re.default,{data:Be(t,r),x:"date",y:"accumulatedAmount",style:Ae(r)})]})})},Be=function(e,t){for(var n="none"===t?e:function(e,t){return e.filter((function(e){return e.food_choice===t}))}(e,t),r=e.map((function(e){return new Date(e.datetime).getTime()})),o=Math.min.apply(Math,(0,R.default)(r)),a=Math.max.apply(Math,(0,R.default)(r)),i=[],l=new Date(o);l<=new Date(a);)i.push(l.toISOString().split("T")[0]),l.setDate(l.getDate()+1);return i.map((function(e){var t=n.filter((function(t){return t.datetime.split("T")[0]===e})).reduce((function(e,t){return e+t.amount}),0);return{date:e,accumulatedAmount:t}}))},Ae=function(e){switch(e){case"none":return Ue.victoryTotalLine;case"dry":return Ue.victoryDryLine;case"wet":return Ue.victoryWetLine}},ze=x.default.create({container:{flex:1,backgroundColor:"white",alignItems:"center",justifyContent:"center"},title:{fontSize:18,padding:10,textAlign:"center",fontWeight:"bold"}});function Ee(){var e=(0,r.useContext)(l),t=e.domain,n=e.feedItems,o=e.setFeedItems,a=e.setIsLoading,s=e.isLoading,d=e.activeUser,u=e.screenBackgroundImage;return(0,r.useEffect)((function(){oe(o,a,t)}),[]),(0,i.jsxs)(h.default,{source:u,style:j.backgroundImage,children:[(0,i.jsx)(P.default,{backgroundColor:we.backgroundColor,barStyle:we.barStyle}),(0,i.jsx)(D.default,{contentContainerStyle:Ue.container,children:s?(0,i.jsx)(I.default,{size:"large",color:"#884400"}):(0,i.jsxs)(f.default,{children:[(0,i.jsx)(qe,{data:B(n,d),foodType:"none",titleText:"Accumulated Feeding Amount"}),(0,i.jsx)(qe,{data:B(n,d),foodType:"dry",titleText:"Accumulated Dry Food Amount"}),(0,i.jsx)(qe,{data:B(n,d),foodType:"wet",titleText:"Accumulated Wet Food Amount"})]})})]})}var qe=function(e){var t=e.data,n=e.foodType,r=e.titleText;return(0,i.jsxs)(f.default,{style:Ue.plotCard,children:[(0,i.jsx)(y.default,{style:ze.title,children:r}),(0,i.jsx)(Le,{data:t,foodType:n})]})},_e=function(e){var t=e.foodItems,n=e.setFoodItems,o=e.style,s=(0,r.useContext)(l).domain,d=(0,r.useState)(!1),u=(0,a.default)(d,2),c=u[0],g=u[1];return(0,i.jsxs)(f.default,{children:[(0,i.jsx)(f.default,{children:(0,i.jsx)($.default,{style:o,onPress:function(){return We(g)},children:(0,i.jsxs)(f.default,{style:J.buttonRowContainer,children:[(0,i.jsx)(k.default,{name:"trash-bin",style:J.buttonIcon}),(0,i.jsx)(y.default,{style:J.buttonText,children:"Clear History"})]})})}),(0,i.jsx)(W.default,{transparent:!0,visible:c,onRequestClose:function(){return g(!1)},children:(0,i.jsx)(f.default,{style:Z.modalContainer,children:(0,i.jsxs)(f.default,{style:Z.modalContent,children:[(0,i.jsx)(y.default,{style:Z.modalTitle,children:"Clear History?"}),(0,i.jsx)(y.default,{style:Z.modalText,children:"Are you sure you want to clear your history?"}),(0,i.jsxs)(f.default,{style:q.rowButtonContainer,children:[(0,i.jsx)($.default,{style:J.okButton,onPress:function(){return Me(t,n,g,s)},children:(0,i.jsx)(y.default,{style:J.buttonText,children:"OK"})}),(0,i.jsx)($.default,{style:J.cancelButton,onPress:function(){return He(g)},children:(0,i.jsx)(y.default,{style:J.buttonText,children:"Cancel"})})]})]})})})]})},We=function(e){e(!0)},Me=function(e,t,n,r){z(e,t,r),n(!1)},He=function(e){e(!1)};function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ke=function(e){var t=e.activeUser,n=e.friendRequests,r=e.minUsers,o=e.onAccept,a=e.onReject,l=n.filter((function(e){return e.to_user===t.id&&e.pending}));return(0,i.jsxs)(D.default,{children:[(0,i.jsx)(y.default,{style:E.settingsTitle,children:0===l.length?"No pending friend requests":"Pending friend requests:"}),(0,i.jsx)(f.default,{style:q.settingsContainer,children:l.map((function(e,t){return(0,i.jsx)(Ze,{senderInfo:r.find((function(t){return e.from_user===t.id})),onAccept:function(){return o(e.id)},onReject:function(){return a(e.id)}},`fr-card-${t}`)}))})]})},Ze=function(e){var t=e.senderInfo,n=e.onAccept,r=e.onReject;return(0,i.jsxs)(f.default,{style:q.tableContainer,children:[(0,i.jsx)(f.default,{children:(0,i.jsx)(y.default,{style:E.innerText,children:t.username})}),(0,i.jsxs)(f.default,{style:Ne(Ne({},q.rowButtonContainer),{},{width:"60%"}),children:[(0,i.jsx)($.default,{onPress:n,style:J.okButton,children:(0,i.jsx)(f.default,{style:Ne(Ne({},J.buttonRowContainer),{},{left:0}),children:(0,i.jsx)(k.default,{name:"checkmark",style:Ne(Ne({},J.buttonIcon),{},{marginRight:0})})})}),(0,i.jsx)($.default,{onPress:r,style:J.cancelButton,children:(0,i.jsx)(f.default,{style:Ne(Ne({},J.buttonRowContainer),{},{left:0}),children:(0,i.jsx)(k.default,{name:"close",style:Ne(Ne({},J.buttonIcon),{},{marginRight:0})})})})]})]})},Ge=(function(){var e=(0,u.default)((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"http://192.168.1.79/";try{console.log("Fetching pending friend requests...");var r=(yield F.default.get(n+"api/friend-requests/")).data.filter((function(e){return e.pending}));t(!1),e(r),console.log(`Fetched ${r.length} friend requests`)}catch(o){return console.log("Error fetching pending friend requests."),o}}))}(),function(){var e=(0,u.default)((function*(e,t,n){try{console.log("Fetching friend requests...");var r=(yield F.default.get(n+"api/friend-requests/")).data;t(!1),e(r),console.log(`Fetched ${r.length} friend requests`)}catch(o){console.log(`Error fetching friend requests, ${o}.`)}}));return function(t,n,r){return e.apply(this,arguments)}}());function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xe=function(){var e=(0,u.default)((function*(e,t,n,r){try{console.log(`Attempting to remove user ID ${e} from ${t.username}'s friends list...`);var o=t.profile.friends.filter((function(t){return t!==e}));yield F.default.patch(`${r}api/profile/${t.id}/`,{friends:o}),n(Qe(Qe({},t),{},{profile:{id:t.profile.id,friends:o}})),console.log(`Removed user ID ${e} from ${t.username}'s friends list.`)}catch(a){console.log(`Failed to remove ID ${e} from friends list, ${a}`)}}));return function(t,n,r,o){return e.apply(this,arguments)}}();function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=function(e){var t=e.activeUser,n=e.setActiveUser,r=e.minUsers.filter((function(e){return t.profile.friends.includes(e.id)}));return(0,i.jsxs)(D.default,{children:[0===r.length?(0,i.jsx)(y.default,{style:E.settingsTitle,children:"No friends to display"}):(0,i.jsx)(y.default,{style:E.settingsTitle,children:"Friend List:"}),(0,i.jsx)(f.default,{style:q.settingsContainer,children:r.map((function(e,r){return(0,i.jsx)(nt,{friendId:e.id,activeUser:t,setActiveUser:n,minUser:e},`f-card-${r}`)}))})]})},nt=function(e){var t=e.friendId,n=e.activeUser,r=e.setActiveUser,o=e.minUser;return(0,i.jsxs)(f.default,{style:et(et({},q.tableContainer),{},{width:300}),children:[(0,i.jsx)(f.default,{children:(0,i.jsx)(y.default,{style:E.innerText,children:o.username})}),(0,i.jsx)($.default,{onPress:function(){Xe(t,n,r),console.log(`Deleting friend username: ${o.username}`)},children:(0,i.jsx)(k.default,{name:"trash",color:"black",size:30})})]})},rt=function(){var e=(0,u.default)((function*(e,t){try{console.log(`Sending friend request from ID ${e.from_user} to ID ${e.to_user}...`),yield F.default.post(t+"api/friend-requests/",e,{headers:{"Content-Type":"application/json"}}),console.log("Sent friend request.")}catch(n){console.log("Could not send friend request.")}}));return function(t,n){return e.apply(this,arguments)}}(),ot=n(99730),at=function(e){var t=e.isVisible,n=e.onSubmit,o=e.onClose,l=e.minUsers,s=e.activeUser,d=e.domain,u=(0,r.useState)(null),c=(0,a.default)(u,2),g=c[0],h=c[1],p=(0,r.useState)(null),m=(0,a.default)(p,2),x=m[0],b=m[1],j=(0,r.useState)(!1),v=(0,a.default)(j,2),S=v[0],w=v[1],C=l.map((function(e){return{id:e.id,name:e.username}})).filter((function(e){return e.id!==s.id&&!s.profile.friends.includes(e.id)})).map((function(e){return{label:e.name,value:e.name}}));return(0,i.jsx)(W.default,{transparent:!0,visible:t,children:(0,i.jsx)(f.default,{style:Z.modalContainer,children:(0,i.jsxs)(f.default,{style:Z.modalContent,children:[(0,i.jsx)(y.default,{style:Z.modalTitle,children:"Send Friend Request"}),(0,i.jsx)(ke.Dropdown,{style:Ie.dropdownMain,placeholderStyle:Ie.placeholderStyle,selectedTextStyle:Ie.selectedTextStyle,inputSearchStyle:Ie.inputSearchStyle,iconStyle:Ie.iconStyle,data:C,search:!0,maxHeight:300,labelField:"label",valueField:"value",placeholder:S?"...":"Select a friend...",searchPlaceholder:"Search for a friend",value:x,onFocus:function(){return w(!0)},onBlur:function(){return w(!1)},onChange:function(e){b(e.value),w(!1),function(e){var t=l.find((function(t){return t.username===e.value}));h(t),console.log(`Selected user: ${t.username}`)}(e)},renderLeftIcon:function(){return(0,i.jsx)(ot.default,{style:Ie.icon,color:S?"blue":"black",name:"Safety",size:20})},renderItem:function(e){return(0,i.jsxs)(f.default,{style:Ie.item,children:[(0,i.jsx)(y.default,{style:Ie.textItem,children:e.label}),e.value===x&&(0,i.jsx)(ot.default,{style:Ie.icon,color:"black",name:"Safety",size:20})]})}}),(0,i.jsx)($.default,{style:J.standardButton,onPress:function(){n(),function(){if(null===g)alert("Please select a user to send a friend request to");else try{var e={to_user:g.id,from_user:s.id,approved:!1,pending:!0};console.log(`Sending friend request to ${g.username}`),rt(e,d),alert(`Sent friend request to ${g.username}`)}catch(t){alert("Error sending friend request"),console.log(t)}}()},children:(0,i.jsxs)(f.default,{style:J.buttonRowContainer,children:[(0,i.jsx)(k.default,{name:"checkmark",style:J.buttonIcon}),(0,i.jsx)(y.default,{style:J.buttonText,children:"Send Request"})]})}),(0,i.jsx)($.default,{style:J.standardButton,onPress:o,children:(0,i.jsxs)(f.default,{style:J.buttonRowContainer,children:[(0,i.jsx)(k.default,{name:"close",style:J.buttonIcon}),(0,i.jsx)(y.default,{style:J.buttonText,children:"Close"})]})})]})})})};function it(){var e=(0,r.useState)(!1),t=(0,a.default)(e,2),n=t[0],o=t[1],s=(0,r.useContext)(l),d=s.domain,u=s.isLoading,c=s.feedItems,g=s.setFeedItems,p=s.setIsLoading,m=s.minUsers,x=s.setMinUsers,b=s.activeUser,v=s.setActiveUser,S=s.friendRequests,w=s.setFriendRequests,C=s.screenBackgroundImage;(0,r.useEffect)((function(){oe(g,p,d),ae(x,p,d)}),[]),(0,r.useEffect)((function(){be(b,v,S,d),Ge(w,p,d)}),[]);return(0,i.jsxs)(h.default,{source:C,style:j.backgroundImage,children:[(0,i.jsx)(P.default,{backgroundColor:we.backgroundColor,barStyle:we.barStyle}),(0,i.jsx)(T.default,{style:q.highLevelContainers,children:u?(0,i.jsx)(I.default,{size:"large",color:"#884400"}):(0,i.jsxs)(f.default,{children:[(0,i.jsx)(_e,{foodItems:B(c,b),setFoodItems:g,style:J.standardButton}),(0,i.jsx)($.default,{onPress:function(){o(!0)},style:J.standardButton,children:(0,i.jsxs)(f.default,{style:J.buttonRowContainer,children:[(0,i.jsx)(k.default,{name:"person-add",style:J.buttonIcon}),(0,i.jsx)(y.default,{style:J.buttonText,children:"Create Friend Request"})]})}),(0,i.jsx)(at,{isVisible:n,onClose:function(){o(!1)},onSubmit:function(){},minUsers:m,activeUser:b,domain:d}),(0,i.jsx)(tt,{activeUser:b,setActiveUser:v,minUsers:m}),(0,i.jsx)(Ke,{activeUser:b,minUsers:m,friendRequests:S,onAccept:function(e){je(e,S,w,b,v,!0,d)},onReject:function(e){je(e,S,w,b,v,!1,d)}})]})})]})}var lt=n(25425),st=n(78021),dt=function(){var e=(0,u.default)((function*(e,t,n,r){try{console.log(`User ${e} is attempting to log in`);var o=yield F.default.post(r+"api/login/",{username:e,password:t});return yield he("token",o.data.token),console.log(`User ${e} has a token`),o.data}catch(a){n(`User ${e} failed to log in, either the user doesn't exist or the password is incorrect`),console.log(`User ${e} failed to log in, ${a}`)}}));return function(t,n,r,o){return e.apply(this,arguments)}}(),ut=function(){var e=(0,u.default)((function*(e,t,n){try{console.log("Trying to validate token...");var r=yield F.default.get(n+"api/get-user/",{headers:{Authorization:`Token ${e}`}});return console.log(`User ${r.data.username} authenticated the token.`),r.data}catch(o){t("Failed to authenticate the token"),console.log(`Failed to authenticate the token, ${o}`)}}));return function(t,n,r){return e.apply(this,arguments)}}(),ct=x.default.create({checkbox:{alignSelf:"center"},checkboxLabel:{color:"white",marginLeft:8},checkboxContainer:{flexDirection:"row",alignItems:"center",marginBottom:15}});const ft=function(e){var t=e.navigation,n=(0,r.useContext)(l),o=n.domain,s=n.setActiveUser,d=n.landingBackgroundImage,c=(0,r.useState)(""),g=(0,a.default)(c,2),p=g[0],m=g[1],x=(0,r.useState)(""),b=(0,a.default)(x,2),v=b[0],S=b[1],w=(0,r.useState)(!1),C=(0,a.default)(w,2),k=C[0],O=C[1],T=(0,r.useState)(""),D=(0,a.default)(T,2),F=D[0],R=D[1],U=(0,r.useState)(!1),L=(0,a.default)(U,2),B=L[0],A=L[1],z=(0,r.useState)(!0),E=(0,a.default)(z,2),_=E[0],W=E[1];(0,r.useEffect)((function(){var e=function(){var e=(0,u.default)((function*(){var e=yield ye("token");if(e){var n=yield ut(e,R,o);s(n),t.navigate("Home")}}));return function(){return e.apply(this,arguments)}}();return e(),function(){}}),[]);var H=function(){var e=(0,u.default)((function*(){try{A(!0),console.log(o),console.log(o),console.log(o);var e=yield dt(p,v,R,o);if("undefined"===typeof e)return void A(!1);var n=yield ut(e.token,R,o);s(n),"undefined"!==typeof n&&(k?(yield he("token",e.token),console.log(`Stored token of ${p} in SecureStore`)):(yield pe("token"),console.log(`Removed token of ${p} from SecureStore`)),R(""),A(!1),t.navigate("Home"))}catch(r){return console.error(r),A(!1),r}}));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(h.default,{source:d,style:j.backgroundImage,children:[(0,i.jsx)(P.default,{backgroundColor:we.backgroundColor,barStyle:we.barStyle}),(0,i.jsx)(f.default,{style:q.highLevelContainers,children:(0,i.jsxs)(f.default,{style:q.formContainer,children:[F?(0,i.jsx)(y.default,{style:G.loginErrorText,children:F}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)(y.default,{style:G.label,children:"Username"}),(0,i.jsx)(M.default,{style:G.textInputLarge,autoCompleteType:"name",textContentType:"username",placeholder:"Enter your username",value:p||"",onChangeText:m}),(0,i.jsx)(y.default,{style:G.label,children:"Password"}),(0,i.jsxs)(f.default,{style:q.inputContainer,children:[(0,i.jsx)(M.default,{style:G.textInputLarge,autoCompleteType:"password",textContentType:"password",placeholder:"Enter your password",secureTextEntry:_,value:v||"",onChangeText:S}),(0,i.jsx)($.default,{style:G.eyeIcon,onPress:function(){W(!_)},children:(0,i.jsx)(st.default,{name:_?"eye-outline":"eye-off-outline",size:24,color:"gray"})})]}),(0,i.jsxs)(f.default,{style:ct.checkboxContainer,children:[(0,i.jsx)(lt.default,{value:k,onValueChange:O,style:ct.checkbox}),(0,i.jsx)(y.default,{style:ct.checkboxLabel,children:"Remember me"})]}),(0,i.jsx)($.default,{style:J.standardButton,onPress:H,children:(0,i.jsx)(y.default,{style:J.buttonText,children:B?(0,i.jsx)(I.default,{size:"small",color:"#ffffff"}):"Log in"})}),(0,i.jsx)($.default,{style:J.backButton,onPress:function(){console.log("Signing up..."),t.navigate("Sign Up")},children:(0,i.jsx)(y.default,{style:J.buttonText,children:"Sign Up"})})]})})]})};var gt=function(){var e=(0,u.default)((function*(e,t,n){try{console.log(`Creating user ${e.username} in ${n+"api/signup/"}...`),yield F.default.post(n+"api/signup/",e),console.log("Fetching minimal users..."),t((yield F.default.get(n+"api/minimal-user/")).data),console.log(`Created user ${e.username}, fetched minimal users.`)}catch(r){console.log(`Error in creating user: ${r}`)}}));return function(t,n,r){return e.apply(this,arguments)}}();const yt=function(e){var t=e.navigation,n=(0,r.useContext)(l),o=n.domain,s=n.setMinUsers,d=n.landingBackgroundImage,u=(0,r.useState)(""),c=(0,a.default)(u,2),g=c[0],p=c[1],m=(0,r.useState)(""),x=(0,a.default)(m,2),b=x[0],v=x[1],S=(0,r.useState)(""),w=(0,a.default)(S,2),C=w[0],k=w[1],O=(0,r.useState)(""),I=(0,a.default)(O,2),T=I[0],D=I[1],F=(0,r.useState)(!0),R=(0,a.default)(F,2),U=R[0],L=R[1],B=(0,r.useState)(!0),A=(0,a.default)(B,2),z=A[0],E=A[1];return(0,i.jsxs)(h.default,{source:d,style:j.backgroundImage,children:[(0,i.jsx)(P.default,{backgroundColor:we.backgroundColor,barStyle:we.barStyle}),(0,i.jsx)(f.default,{style:q.highLevelContainers,children:(0,i.jsxs)(f.default,{style:q.formContainer,children:[(0,i.jsx)(y.default,{style:G.label,children:"Username"}),(0,i.jsx)(M.default,{value:g,style:G.textInputLarge,autoCompleteType:"username",textContentType:"username",placeholder:"Choose a username",autoCapitalize:"none",onChangeText:p}),(0,i.jsx)(y.default,{style:G.label,children:"Email"}),(0,i.jsx)(M.default,{value:b,style:G.textInputLarge,autoCompleteType:"email",textContentType:"emailAddress",placeholder:"Enter your email",keyboardType:"email-address",autoCapitalize:"none",onChangeText:v}),(0,i.jsx)(y.default,{style:G.label,children:"Password"}),(0,i.jsxs)(f.default,{style:q.inputContainer,children:[(0,i.jsx)(M.default,{value:C,style:G.textInputLarge,autoCompleteType:"password",textContentType:"password",placeholder:"Enter your password",secureTextEntry:U,onChangeText:k}),(0,i.jsx)($.default,{style:G.eyeIcon,onPress:function(){L(!U)},children:(0,i.jsx)(st.default,{name:U?"eye-outline":"eye-off-outline",size:24,color:"gray"})})]}),(0,i.jsx)(y.default,{style:G.label,children:"Confirm Password"}),(0,i.jsxs)(f.default,{style:G.inputContainer,children:[(0,i.jsx)(M.default,{value:T,style:G.textInputLarge,autoCompleteType:"password",textContentType:"password",placeholder:"Confirm your password",secureTextEntry:z,onChangeText:D}),(0,i.jsx)($.default,{style:G.eyeIcon,onPress:function(){E(!z)},children:(0,i.jsx)(st.default,{name:z?"eye-outline":"eye-off-outline",size:24,color:"gray"})})]}),(0,i.jsx)($.default,{style:J.standardButton,onPress:function(){""!==g&&""!==b&&""!==C&&""!==T?!function(e){return!!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(e)}(b)?alert("Please enter a valid email address"):C===T?(gt({username:g,email:b,password:C,profile:{friends:[]}},s,o),alert(`Username ${g} was created!`),t.navigate("Landing")):alert("Passwords do not match"):alert("Please fill in all fields")},children:(0,i.jsx)(y.default,{style:J.buttonText,children:"Sign Up"})}),(0,i.jsx)($.default,{style:J.backButton,onPress:function(){t.navigate("Landing")},children:(0,i.jsx)(y.default,{style:J.buttonText,children:"Back"})})]})})]})};function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt=(0,c.default)(),xt=(0,O.default)(),bt={drawerActiveBackgroundColor:b.itemFocused.backgroundColor,drawerActiveTintColor:b.itemFocused.color,drawerInactiveTintColor:b.itemNotFocused.color},jt={headerStyle:{backgroundColor:b.itemFocused.backgroundColor},headerTitleStyle:{color:b.itemFocused.color},headerTintColor:b.itemFocused.color};function vt(e){var t=e.navigation,n=(0,r.useContext)(l).activeUser,o=function(){var e=(0,u.default)((function*(){try{console.log("Logging out"),yield pe("token")}catch(e){return console.error(`Cannot remove token from SecureStorage: ${e}`),e}t.navigate("Landing")}));return function(){return e.apply(this,arguments)}}();return(0,i.jsx)(mt.Navigator,{initialRouteName:"Home",screenOptions:jt,drawerContent:function(e){return(0,i.jsx)(C,pt(pt({},e),{},{style:b.drawerHeaderText}))},children:n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(mt.Screen,{name:"Today's Feeding",component:Ce,options:pt({drawerIcon:function(){return(0,i.jsx)(k.default,{name:"home",style:b.iconFocused})}},bt)}),(0,i.jsx)(mt.Screen,{name:"History",component:Pe,options:pt({drawerIcon:function(){return(0,i.jsx)(k.default,{name:"book",style:b.iconFocused})}},bt)}),(0,i.jsx)(mt.Screen,{name:"Plots",component:Ee,options:pt({drawerIcon:function(){return(0,i.jsx)(k.default,{name:"stats-chart",style:b.iconFocused})}},bt)}),(0,i.jsx)(mt.Screen,{name:"Settings",component:it,options:pt({drawerIcon:function(){return(0,i.jsx)(k.default,{name:"settings",style:b.iconFocused})}},bt)}),(0,i.jsx)(mt.Screen,{name:"Log Out",component:St,options:pt({drawerIcon:function(){return(0,i.jsx)(k.default,{name:"log-out",style:b.iconFocused})}},bt),listeners:{drawerItemPress:function(e){e.preventDefault(),o()}}})]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(xt.Screen,{name:"Landing",component:ft,options:{headerShown:!1}})})})}function St(){return(0,i.jsxs)(xt.Navigator,{initialRouteName:"Landing",screenOptions:jt,children:[(0,i.jsx)(xt.Screen,{name:"Landing",component:ft,options:{headerShown:!1}}),(0,i.jsx)(xt.Screen,{name:"Sign Up",component:yt,options:{headerShown:!1}}),(0,i.jsx)(xt.Screen,{name:"Home",component:vt,options:{headerShown:!1}})]})}function wt(){return(0,i.jsx)(s,{children:(0,i.jsxs)(o.default,{style:ze.container,children:[(0,i.jsx)(P.default,{backgroundColor:we.backgroundColor,barStyle:we.barStyle}),(0,i.jsx)(St,{})]})})}},43151:(e,t,n)=>{e.exports=n.p+"static/media/Drawer.4c9ddb701578bca1e9cf.jpg"},14009:(e,t,n)=>{e.exports=n.p+"static/media/Landing-Background.86a1b7850d1dc95a3611.jpg"},58768:(e,t,n)=>{e.exports=n.p+"static/media/Screen-Background.d423ec4b24b5fef17f11.jpg"},73486:(e,t,n)=>{e.exports=n.p+"static/media/daisy_navigator.5add0500bdc0bd283aab.jpeg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,(()=>{var e=[];n.O=(t,r,o,a)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,o,a]=e[u],l=!0,s=0;s<r.length;s++)(!1&a||i>=a)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&o&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/daisy_feeder_web/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[i,l,s]=r,d=0;if(i.some((t=>0!==e[t]))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)var u=s(n)}for(t&&t(r);d<i.length;d++)a=i[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[265],(()=>n(96953)));r=n.O(r)})();
//# sourceMappingURL=main.545c5d66.js.map